apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: doppler-infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  provider:
    doppler:
      auth:
        secretRef:
          dopplerToken:
            name: doppler-token-infrastructure
            namespace: kube-system
            key: token
---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: doppler-dev
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  provider:
    doppler:
      auth:
        secretRef:
          dopplerToken:
            name: doppler-token-dev
            namespace: kube-system
            key: token
---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: doppler-prod
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  provider:
    doppler:
      auth:
        secretRef:
          dopplerToken:
            name: doppler-token-prod
            namespace: kube-system
            key: token